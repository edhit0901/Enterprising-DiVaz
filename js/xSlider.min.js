"use strict";!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery||Zepto)}(function(t){if(!t)return console.warn("xSlider needs jQuery");var i=function(i,s){this.CONTAIN=t(i),this.UL=this.CONTAIN.find("ul"),this.LI=this.CONTAIN.find("li"),this.CURRENT_DISPLAY=0,this.IS_WORKING=!1,this.TIMER="",this.setOptions(s),this.init()};i.prototype={setOptions:function(i){var s={autoPlay:!0,interval:3e3,speed:400,nav:!0,page:!1,scrollNum:1,direction:"ltr",controls:!0,hoverStop:!1};this.OPTIONS=t.extend(s,i)},init:function(){var t=this.LI,i=this.OPTIONS.scrollNum;this.GROUP_NUM=Math.ceil(t.length/i),t.length>1&&(this.UL.css({width:100*(t.length+2*i)+"%","margin-left":100*-i+"%",left:"0"}),this.LI.css({"float":"left",listStyle:"none",width:100/(t.length+2*i)+"%"}),this.UL.html(t.slice(0).clone()).append(t.slice(0,i).clone()).prepend(t.slice(-i).clone()),this.setControls(),this.setFoot(),this.setHover(),this.autoPlay())},setControls:function(){if(this.OPTIONS.controls){var t=this;this.CONTAIN.append('<div class="xslider-arrow"><span class="prev"></span><span class="next"></span></div>').find(".xslider-arrow").on("click",".next",function(i){t.toNext()}).on("click",".prev",function(i){t.toPrev()})}},setFoot:function(){if(this.OPTIONS.nav||this.OPTIONS.page){var i=this,s='<div class="xslider-nav">';if(this.OPTIONS.nav)for(var n=0;n<this.GROUP_NUM;n++)s+=0==n?'<span class="active"></span>':"<span></span>";this.OPTIONS.page&&(s+="<p><font>1</font>/"+this.OPTIONS.GROUP_NUM+"</p>"),s+="</div>",this.CONTAIN.append(s).find(".xslider-nav").on("click","span",function(){if(!i.IS_WORKING){var s=t(".xslider-nav span",i.CONTAIN).index(t(this));i.animate(s)}})}},setHover:function(){this.OPTIONS.hover&&this.CONTAIN.hover(function(){_this.stopAuto()},function(){_this.autoPlay()})},autoPlay:function(){if(this.OPTIONS.autoPlay){var t=this;this.TIMER=setInterval(function(){"rtl"==t.OPTIONS.direction?t.toPrev():t.toNext()},t.OPTIONS.interval)}},stopAuto:function(){if(this.OPTIONS.autoPlay){var t=this;clearInterval(t.TIMER)}},toNext:function(){if(!this.IS_WORKING){var t=this.CURRENT_DISPLAY+1;this.animate(t)}},toPrev:function(){if(!this.IS_WORKING){var t=this.CURRENT_DISPLAY-1;this.animate(t)}},animate:function(t){var i=this;this.IS_WORKING=!0,this.stopAuto(),this.UL.velocity({left:100*-t+"%"},i.OPTIONS.speed,function(){0>t?(i.CURRENT_DISPLAY=i.GROUP_NUM-1,i.UL.css("left",100*-(i.GROUP_NUM-1)+"%")):t>=i.GROUP_NUM?(i.CURRENT_DISPLAY=0,i.UL.css("left",0)):i.CURRENT_DISPLAY=t,i.setPosition(i.CURRENT_DISPLAY),i.IS_WORKING=!1,i.OPTIONS.autoPlay&&i.autoPlay()})},setPosition:function(t){this.OPTIONS.nav&&this.CONTAIN.find(".xslider-nav").find("span").removeClass("active").eq(t).addClass("active"),this.OPTIONS.page&&this.CONTAIN.find(".xslider-nav").find("font").html(t+1)},destroy:function(){item.length>1&&(options.controls&&t(".xslider-arrow",cont).remove(),(options.nav||options.page)&&cont.find(".xslider-nav").remove(),this.stopAuto(),working=!1)}},t.fn.xSlider=function(s){return this.each(function(){if(!t(this).data("xSlider")){t(this).data("xSlider",1);new i(this,s)}})}});